# bison構文解析を用いた、texのRPN記法

# 概要

プロジェクトは、texの数式表現に対して、RPN記法を独自に定義しそれを用いて簡潔に記述できるようにしたものである。プログラムの動作は、RPN記法で書かれた数式をtexの数式表記に戻すというものである。

RPN記法(逆ポーランド記法)とは計算式の書き方の一つで、従来用いられている中置記法("3+4"のような書き方)と違い、"3 4 +"のように演算子を最後につける記法である。
この記法を用いてると、括弧を用いることなく数式の構造を表せる。例えば、"(1+2)+(3+4)"は"1 2 + 3 4 + +"となる。

texの数式表記は括弧が多用されていて使いにくいと感じる。そこで、括弧を用いないRPN記法でtexの数式を表すことができないかというモチベーションでこのプログラムは作られた。

# 使用方法

rpn-tex/plus-string.tab.c をgccなどでコンパイルし、実行ファイルを作成。
実行ファイルを実行すると、入力を受け付ける

# 実行例

試しに、フーリエ級数展開の公式を書いてみる

input

```
1 T @f @i  - T 2 @f & _  T 2 @f ^ & f(t) & e  -i 2pi T @f &  nt & ^ & dt & 
```

output

```
\frac{1}{T}\int_{-\frac{T}{2}}^{\frac{T}{2}}f(t)e^{-i\frac{2pi}{T}nt}dt
```

# 実装した文法

- @f: frac
- ^: ^{}
- _: _{}
- &: cat(この記号の前に連続して書かれた2つの数式を結合する)
- ): ()(直前に現れた数式を括弧で括る)
- @i: \int

# 実装したい文法

- NEG
- "-"
- +



# ファイル構成
- rpn-tex: rpn記法で書かれたtexをtex数式モードに変換する。

- only-plus: bison exampleのcalc.yから間引いて、数値+数値、の形をしたコードのみ計算するようにしたもの。.gvファイルを、graphvizで見るために単純なコードにした。これを改変してstring+stringで文字列を結合するようにしたのが、plus-to-string。

- plus-to-string: only-plusを改変して、string+stringを入力したときのみこれらをcatして返すコード

- rpn: RPN(逆ポーランド記法)を処理するbison examplesのコード

- tree.c: 2分木アルゴリズム。ノードを構造体で管理している。

- lex-tutorial: flexを試す。動かない

- only-plus-header: 標準入力以外に対応させようとした。動かない。 

# 考えられる原因とデバッグ方法

yylexエラー
- 正しく形態素に区切れているか -> 文字数のカウントや、型をprintして確かめる。

構文エラー
- %varboseなどを用いてどこの入力がsyntax errorだったかを解析する
- 数値などの単純なtoken(終端記号)を持つ、同じ構造の文法規則を作り、--graphを指定してコンパイルして、.gvファイルのオートマトンを比較する。

